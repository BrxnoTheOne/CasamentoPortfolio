# ðŸ’ Lista de Casamento Serverless (Pix & Cotas)

> Um sistema de lista de presentes real, focado em alta conversÃ£o via Pix, zero taxas de intermediÃ¡rios e lÃ³gica de fracionamento de itens caros (Crowdfunding).


## ðŸ“– Sobre o Projeto

Este projeto nasceu de uma necessidade real: **fugir das taxas abusivas (4% a 6%)** cobradas pelos sites tradicionais de lista de casamento (iCasei, Casar.com, etc).

O objetivo foi criar uma **Single Page Application (SPA)** leve, onde os convidados pudessem visualizar os presentes, escolher "fatias" (cotas) de itens caros (como uma Lua de Mel ou Geladeira) e realizar o pagamento via Pix direto para a conta do casal, garantindo que 100% do valor fosse aproveitado.

### ðŸŽ¯ Resultados Reais
-   **Economia:** 0% de taxas de transaÃ§Ã£o.
-   **Performance:** Carregamento instantÃ¢neo (Vanilla JS + Supabase).
-   **ExperiÃªncia:** Checkout simplificado em 2 cliques (Copia e Cola Pix).

---

## ðŸš€ Funcionalidades Principais

-   **ðŸ“¦ Sistema de Cotas (Crowdfunding):** Itens de alto valor sÃ£o divididos em fraÃ§Ãµes. O convidado compra 1 cota e vÃª a barra de progresso avanÃ§ar em tempo real.
-   **ðŸ”„ LÃ³gica de MultiplicaÃ§Ã£o:** Para itens baratos (ex: Toalhas), o sistema inverte a lÃ³gica, agrupando vÃ¡rias unidades em um Ãºnico card de "meta".
-   **ðŸ’¸ Pagamento via Pix:** GeraÃ§Ã£o automÃ¡tica de Payload Pix e QR Code dinÃ¢mico usando API externa.
-   **ðŸ”’ SeguranÃ§a de API:** Arquitetura de separaÃ§Ã£o de credenciais (Config Pattern) para proteger chaves de API no Frontend.
-   **ðŸ“± Design Responsivo:** Interface Mobile-First utilizando CSS Grid e Flexbox.
-   **â³ ConteÃºdo Temporal:** LÃ³gica de "Time-gating" para revelar o card da Lua de Mel apenas prÃ³ximo Ã  data do evento.

---

## ðŸ›  Tecnologias Utilizadas

O projeto segue a filosofia **KISS (Keep It Simple, Stupid)**. Evitei frameworks complexos para garantir manutenÃ§Ã£o fÃ¡cil e custo zero de hospedagem.

-   **Frontend:**
    -   HTML5 SemÃ¢ntico
    -   CSS3 (Grid Layout, Clamp para tipografia fluida, VariÃ¡veis CSS)
    -   JavaScript (ES6 Modules, Async/Await)
-   **Backend (BaaS):**
    -   **Supabase (PostgreSQL):** Banco de dados relacional e API RESTful instantÃ¢nea.
-   **IntegraÃ§Ãµes:**
    -   API de QR Code (GoQR/QRServer)
    -   API de IP (Ipify para log de seguranÃ§a simples)

---

## ðŸ’¡ HistÃ³ria e DecisÃµes TÃ©cnicas (Processo de CriaÃ§Ã£o)

Durante o desenvolvimento, enfrentei trÃªs desafios principais que ditaram a arquitetura do projeto:

### 1. O Dilema dos Itens Caros
**Problema:** Nenhum convidado daria, sozinho, um sofÃ¡ de R$ 2.500,00.
**SoluÃ§Ã£o:** Implementei uma lÃ³gica de **Cotas**.
-   *No Banco:* Defino `total_cotas = 10` e `preco = 2500`.
-   *No Frontend:* O JS calcula `PreÃ§o da Cota = PreÃ§o Total / Total de Cotas` e renderiza uma barra de progresso baseada em `(vendidas / total) * 100%`.

### 2. O Problema do CartÃ£o de CrÃ©dito
**Problema:** Integrar Stripe ou MercadoPago traria taxas de ~5% e retenÃ§Ã£o do dinheiro por 14 dias (D+14).
**SoluÃ§Ã£o:** Focar 100% no **Pix**.
-   Criei um gerador de Payload estÃ¡tico. O convidado copia o cÃ³digo, paga no banco dele e informa no site.
-   *Trade-off:* A confirmaÃ§Ã£o nÃ£o Ã© automÃ¡tica (webhook), mas a economia de taxas compensa a validaÃ§Ã£o manual.

### 3. SeguranÃ§a no Frontend (Client-Side)
**Problema:** Como usar o Supabase no front sem expor chaves de administraÃ§Ã£o?
**SoluÃ§Ã£o:**
-   Uso apenas da `ANON_KEY` (chave pÃºblica limitada) do Supabase.
-   CriaÃ§Ã£o do padrÃ£o `config.js` (ignorado pelo Git) para injetar as credenciais em `window.CONFIG`. Isso permite que o cÃ³digo seja pÃºblico no GitHub sem vazar dados sensÃ­veis.

---

## ðŸ—„ Estrutura do Banco de Dados (Supabase)

A tabela principal `presentes` foi estruturada para suportar a lÃ³gica hÃ­brida de itens Ãºnicos e cotas.

```sql
CREATE TABLE presentes (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nome_item TEXT NOT NULL,
  preco NUMERIC(10,2) NOT NULL, -- PreÃ§o TOTAL do item/combo
  imagem_url TEXT,
  total_cotas INTEGER DEFAULT 1, -- Se 1 = Item Ãšnico. Se > 1 = Sistema de Cotas.
  cotas_vendidas INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now())
);


# ðŸ“„ LicenÃ§a
Este projeto foi desenvolvido para fins pessoais e educacionais. Sinta-se livre para usar a lÃ³gica como base para seus estudos ou para o seu prÃ³prio evento!
